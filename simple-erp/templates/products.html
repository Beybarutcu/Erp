{% extends "base.html" %}

{% block title %}{{ t('inventory') }} - Simple ERP{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{{ t('inventory') }}</h1>
    <a href="{{ url_for('add_product') }}" class="btn-primary">+ {{ t('add_product') }}</a>
</div>

<div class="content-section">
    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>{{ t('sku') }}</th>
                    <th>{{ t('product_name') }}</th>
                    <th>{{ t('category') }}</th>
                    <th>{{ t('material_type') }}</th>
                    <th>{{ t('color') }}</th>
                    <th>{{ t('mold_code') }}</th>
                    <th>{{ t('quantity') }}</th>
                    <th>{{ t('price') }}</th>
                    <th>{{ t('actions') }}</th>
                </tr>
            </thead>
            <tbody>
                {% if products %}
                    {% for product in products %}
                    <tr class="{% if product.quantity <= product.reorder_level %}low-stock{% endif %}">
                        <td><strong>{{ product.sku }}</strong></td>
                        <td>{{ product.name }}</td>
                        <td>{{ product.category or '-' }}</td>
                        <td>{{ product.material_type or '-' }}</td>
                        <td>{{ product.color or '-' }}</td>
                        <td>{{ product.mold_code or '-' }}</td>
                        <td>
                            {{ product.quantity }} {{ t(product.unit or 'pcs') }}
                            {% if product.quantity <= product.reorder_level %}
                                <span class="badge badge-warning">{{ t('low_stock') }}</span>
                            {% endif %}
                        </td>
                        <td>₺{{ "%.2f"|format(product.unit_price) }}</td>
                        <td class="actions">
                            <a href="{{ url_for('edit_product', id=product.id) }}" class="btn-small btn-edit">{{ t('edit') }}</a>
                            <a href="{{ url_for('delete_product', id=product.id) }}" 
                               class="btn-small btn-delete" 
                               onclick="return confirm('{{ product.name }} - Silmek istediğinize emin misiniz?')">{{ t('delete') }}</a>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="9" class="text-center">{{ t('no_data') }}</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
